<!DOCTYPE html>
<!--[if IE 9]><html class="lt-ie10" lang="en" > <![endif]-->
<html class="no-js" lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Staff</title>
<!--        <link rel="icon" href="/templates/img/favicon.png" type="image/png"/>-->

        <link rel='stylesheet' href='/system/templates/js/foundation-5.5.0/css/normalize.css'/><link rel='stylesheet' href='/system/templates/js/foundation-5.5.0/css/foundation.css'/><link rel='stylesheet' href='/system/templates/css/style.css'/><link rel='stylesheet' href='/system/templates/css/tablesorter.css'/><link rel='stylesheet' href='/system/templates/css/datePicker.css'/><link rel='stylesheet' href='/system/templates/js/jquery-ui-new/css/custom-theme/jquery-ui-1.8.13.custom.css'/><link rel='stylesheet' href='/system/templates/css/liveValidation.css'/><link rel='stylesheet' href='/system/templates/js/colorbox/colorbox/colorbox.css'/><link rel='stylesheet' href='/system/templates/css/jquery.asmselect.css'/><link rel='stylesheet' href='/system/templates/font/foundation-icons/foundation-icons.css'/><link rel='stylesheet' href='/system/templates/js/pickadate.js-3.5.2/lib/compressed/themes/classic.css'/><link rel='stylesheet' href='/system/templates/js/pickadate.js-3.5.2/lib/compressed/themes/classic.date.css'/><link rel='stylesheet' href='/system/templates/js/pickadate.js-3.5.2/lib/compressed/themes/classic.time.css'/><link rel='stylesheet' href='/system/templates/js/codemirror-4.4/lib/codemirror.css'/><script src='/system/templates/js/foundation-5.5.0/js/vendor/modernizr.js'></script><script src='/system/templates/js/foundation-5.5.0/js/vendor/jquery.js'></script><script src='/system/templates/js/main.js'></script><script src='/system/templates/js/tablesorter/jquery.tablesorter.js'></script><script src='/system/templates/js/tablesorter/addons/pager/jquery.tablesorter.pager.js'></script><script src='/system/templates/js/colorbox/colorbox/jquery.colorbox-min.js'></script><script src='/system/templates/js/jquery-ui-1.10.4.custom/js/jquery-ui-1.10.4.custom.min.js'></script><script src='/system/templates/js/pickadate.js-3.5.2/lib/compressed/picker.js'></script><script src='/system/templates/js/pickadate.js-3.5.2/lib/compressed/picker.date.js'></script><script src='/system/templates/js/pickadate.js-3.5.2/lib/compressed/picker.time.js'></script><script src='/system/templates/js/jquery-ui-timepicker-addon.js'></script><script src='/system/templates/js/livevalidation.js'></script><script src='/system/templates/js/jquery.asmselect.js'></script><script src='/system/templates/js/boxover.js'></script><script src='/system/templates/js/ckeditor/ckeditor.js'></script><script src='/system/templates/js/chart-js/Chart.min.js'></script><script src='/system/templates/js/codemirror-4.4/codemirror-compressed.js'></script>        <script type="text/javascript">
            var $ = jQuery;

            $(document).ready(function() {
                $("table.tablesorter").tablesorter({dateFormat: "uk", widthFixed: true, widgets: ['zebra']});
                $(".tab-head").children("a").each(function() {
                    $(this).bind("click", {alink: this}, function(event) {
                        changeTab(event.data.alink.hash);
                        return false;
                    });
                });

                // Change tab if hash exists
                var hash = window.location.hash.split("#")[1];
                if (hash && hash.length > 0) {
                    changeTab(hash);
                } else {
                    $(".tab-head > a:first").trigger("click");
                }
                
                // Set up CodeMirror instances if any
                bindCodeMirror();
                
                // Adjust the breadcrumbs div if it's content is longer than the viewport
                var breadcrumbs = $('.cmfive_breadcrumbs');
                if (breadcrumbs.length) {
                    if (breadcrumbs[0].scrollWidth > $(window).width()) {
                        breadcrumbs.css('height', (breadcrumbs.height() + 20) + "px");
                    }
                }
                
                // Search function shortcut listener
                $(document).on('keydown', function ( e ) {
                    if ((e.ctrlKey || e.metaKey) && e.which === 70) {
                        $('#cmfive_search_button').click();
                        return false;
                    }
                });
            });

            // Try and prevent multiple form submissions
            $("input[type=submit]").click(function() {
                $(this).hide();
            });
            $(document).bind('cbox_complete', function() {
                $("input[type=submit]").click(function() {
                    $(this).hide();
                });
            });
        </script>
    </head>
    <body>
        <div class="loading_overlay" style="display:none;">
            <div class="circle"></div>
            <div class="circle_inner"></div>
            <div class="circle_center"></div>
            <h4 class="subheader">Please wait...</h4>
        </div>
        <div class="row-fluid">
            <nav class="top-bar" data-topbar><!-- To make it that you need to click to activate dropdown use  data-options="is_hover: false" -->
                <ul class="title-area">
                    <li class="name">
                        <!--<h1><a href="/"></a></h1>-->
                    </li>
                    <li class="toggle-topbar"><a href="">Menu</a></li>
                </ul>

                <section class="top-bar-section">
                    <!-- Right Nav Section -->
                    <ul class="right">
                        <!-- Search bar -->
                        <li><a onclick="modal_history.push('/search?=1'); $('#cmfive-modal').foundation('reveal', 'open', '/search?=1');return false;"id='cmfive_search_button' ><span class='fi-magnifying-glass'></span></a></li>
                        
                        <!-- User Profile drop down -->
                                                    <li class="has-dropdown">
                                <a href="#"><span  class="fi-torso"></span></a>
                                <ul class="dropdown">
<li><a onclick="modal_history.push('http://crm.dev.code.2pisoftware.com/auth/profile/box?isbox=1'); $('#cmfive-modal').foundation('reveal', 'open', 'http://crm.dev.code.2pisoftware.com/auth/profile/box?isbox=1');return false;">Administrator</a></li>
<li><a href='http://crm.dev.code.2pisoftware.com/auth/logout' >Logout</a></li>
</ul>
    
                            </li>
                                            </ul>

                    <!-- Left Nav Section -->
                    <ul class="left">
                                                    <li><a href='http://crm.dev.code.2pisoftware.com/main/index' ><span class='fi-home'></span></a></li>
                            <li class="divider"></li>
                                                                        <li class="has-dropdown " id="topnav_admin">
                                            <a href='http://crm.dev.code.2pisoftware.com/admin' >Admin</a><ul class="dropdown">
<li><a href='http://crm.dev.code.2pisoftware.com/admin/users' >List Users</a></li>
<li><a href='http://crm.dev.code.2pisoftware.com/admin/groups' >List Groups</a></li>
<li><a href='http://crm.dev.code.2pisoftware.com/admin/lookup' >Lookup</a></li>
<li><a href='http://crm.dev.code.2pisoftware.com/admin-templates' >Templates</a></li>
<li><a href='http://crm.dev.code.2pisoftware.com/admin/phpinfo' >PHP Info</a></li>
<li><a href='http://crm.dev.code.2pisoftware.com/admin/printers' >Printers</a></li>
<li><a href='http://crm.dev.code.2pisoftware.com/admin/printqueue' >Print Queue</a></li>
<li><a href='http://crm.dev.code.2pisoftware.com/admin/databasebackup' >Backup Database</a></li>
<li><a href='http://crm.dev.code.2pisoftware.com/admin/composer' target='_blank' >Install/Update Composer</a></li>
</ul>
                                            </li>
                                                                                <li class="divider"></li>
                                                                                <li class="has-dropdown " id="topnav_channels">
                                            <a href='http://crm.dev.code.2pisoftware.com/channels' >Channels</a><ul class="dropdown">
<li><a href='http://crm.dev.code.2pisoftware.com/channels/listchannels' >List Channels</a></li>
<li><a href='http://crm.dev.code.2pisoftware.com/channels/listprocessors' >List Processors</a></li>
<li><a href='http://crm.dev.code.2pisoftware.com/channels/listmessages' >List Messages</a></li>
</ul>
                                            </li>
                                                                                <li class="divider"></li>
                                                                                <li class="has-dropdown " id="topnav_inbox">
                                            <a href='http://crm.dev.code.2pisoftware.com/inbox' class='current active' >Inbox<span class='label secondary round' style='margin-left: 5px;'>10</span></a><ul class="dropdown">
<li><a href='http://crm.dev.code.2pisoftware.com/inbox' >New Messages</a></li>
<li><a href='http://crm.dev.code.2pisoftware.com/inbox/read' >Read Messages</a></li>
<li><a href='http://crm.dev.code.2pisoftware.com/inbox/showarchive' >Archive</a></li>
<li><a href='http://crm.dev.code.2pisoftware.com/inbox/trash' >Bin</a></li>
</ul>
                                            </li>
                                                                                <li class="divider"></li>
                                                                                <li class="has-dropdown " id="topnav_report">
                                            <a href='http://crm.dev.code.2pisoftware.com/report' >Report</a><ul class="dropdown">
<li><a href='http://crm.dev.code.2pisoftware.com/report/index' >Report Dashboard</a></li>
<li><a href='http://crm.dev.code.2pisoftware.com/report/edit' >Create a Report</a></li>
<li><a href='http://crm.dev.code.2pisoftware.com/report-connections' >Connections</a></li>
<li><a href='http://crm.dev.code.2pisoftware.com/report/listfeed' >Feeds Dashboard</a></li>
</ul>
                                            </li>
                                                                                <li class="divider"></li>
                                                                                <li class="has-dropdown " id="topnav_task">
                                            <a href='http://crm.dev.code.2pisoftware.com/task' >Task</a><ul class="dropdown">
<li><a href='http://crm.dev.code.2pisoftware.com/task/edit' >New Task</a></li>
<li><a href='http://crm.dev.code.2pisoftware.com/task/index' >Task Dashboard</a></li>
<li><a href='http://crm.dev.code.2pisoftware.com/task/tasklist' >Task List</a></li>
<li><a href='http://crm.dev.code.2pisoftware.com/task/tasklist#notifications' >Notifications</a></li>
<li><a href='http://crm.dev.code.2pisoftware.com/task/taskweek' >Activity</a></li>
<li><a href='http://crm.dev.code.2pisoftware.com/task-group/viewtaskgrouptypes' >Task Groups</a></li>
</ul>
                                            </li>
                                                                                <li class="divider"></li>
                                                                                <li class="has-dropdown " id="topnav_crm">
                                            <a href='http://crm.dev.code.2pisoftware.com/crm' >Crm</a><ul class="dropdown">
<li><a href='http://crm.dev.code.2pisoftware.com/crm/index' >Home</a></li>
<li><a href='http://crm.dev.code.2pisoftware.com/crm-accounts' >Accounts</a></li>
<li><a href='http://crm.dev.code.2pisoftware.com/crm-contacts' >Contacts</a></li>
<li><a href='http://crm.dev.code.2pisoftware.com/crm-opportunities' >Opportunities</a></li>
<li><a href='http://crm.dev.code.2pisoftware.com/crm-quotes' >Quotes</a></li>
<li><a href='http://crm.dev.code.2pisoftware.com/crm-invoices' >Invoices</a></li>
<li><a href='http://crm.dev.code.2pisoftware.com/crm-projects' >Projects</a></li>
<li><a href='http://crm.dev.code.2pisoftware.com/crm-expenses' >Expenses</a></li>
<li><a href='http://crm.dev.code.2pisoftware.com/crm-helpdesk' >Helpdesk</a></li>
<li><a href='http://crm.dev.code.2pisoftware.com/crm-admin' >Admin</a></li>
</ul>
                                            </li>
                                                                                <li class="divider"></li>
                                                                                <li class="has-dropdown active" id="topnav_staff">
                                            <a href='http://crm.dev.code.2pisoftware.com/staff' class='current active' >Staff</a><ul class="dropdown">
<li><a href='http://crm.dev.code.2pisoftware.com/staff-leaveapplications' class='current active' >Leave Applications</a></li>
<li><a href='http://crm.dev.code.2pisoftware.com/staff-privatecartravel' class='current active' >Private Car Travel</a></li>
<li><a href='http://crm.dev.code.2pisoftware.com/staff-payruns' class='current active' >Payruns</a></li>
</ul>
                                            </li>
                                                                                <li class="divider"></li>
                                                                    <li><a onclick="modal_history.push('http://crm.dev.code.2pisoftware.com/help/view/staff-leaveapplications/index?isbox=1'); $('#cmfive-modal').foundation('reveal', 'open', 'http://crm.dev.code.2pisoftware.com/help/view/staff-leaveapplications/index?isbox=1');return false;"><span class='fi-q'>?</span></a> </li>
                                                </ul> <!-- End left nav section -->
                </section>
            </nav>
        </div>

        <!-- Breadcrumbs -->
        <div class="row-fluid">
            <ul class='cmfive_breadcrumbs '><li><i class='fi-clock'></i></li><li class='current'>List Leave Applications</li></ul>        </div>
        
        <div class="row-fluid body">
                        <div class="row-fluid ">
                <div class="row-fluid small-12">
                    <h3 class="header">Staff</h3>
                </div>
                                                        <div data-alert class="alert-box info">
                        Leave application created                        <a href="#" class="close">&times;</a>
                    </div>
                
                <div class="row-fluid" style="overflow: hidden;">
                    <h1>Leave Applications</h1>
<form action='/staff-leaveapplications' method='GET' id='leaveapplications_filter'  ><fieldset style="padding: 0; padding-top: 10px; padding-left: 10px;">
<legend>Filter Leave Applications</legend>
<ul id='filter-grid' class='small-block-grid-1 medium-block-grid-3 large-block-grid-4'><li><div class='small-12 columns'><label>Status<select id="filter_status"  name="filter_status" class="" style="" ><option value=''>-- Select --</option><option value="New">New</option><option value="Approved">Approved</option><option value="Rejected">Rejected</option></select></label></div></li><li><div class='small-12 columns'><label>Employee<input type="hidden" id="filter_employee"  name="filter_employee" value=""/><input type="text" id="acp_filter_employee"  name="acp_filter_employee" value="" class="" style="width: 100%;"  /><script type='text/javascript'>$(function(){
                    $("#acp_filter_employee").keyup(function(e){
                    	if (e.which != 13) { 	
                            $("#filter_employee").val("");
                        }
                    });
                    $("#acp_filter_employee").autocomplete({
                        minLength:1, 
                        source: [{"id":"1","value":"Administrator"}],
                        select: function(event,ui){
                            $("#filter_employee").val(ui.item.id); //acp_filter_employee(event,ui);
                            selectAutocompleteCallback(event, ui);
                        }
                    });
                });</script></label></div></li><li><div class='small-12 columns'><label>Date From<input class="date_picker" type="text" name="filter_date_from" value="" size="" id="filter_date_from"  /><script>$('#filter_date_from').datepicker({dateFormat: 'dd/mm/yy'});$('#filter_date_from').keyup( function(event) { $(this).val('');}); </script></label></div></li><li><div class='small-12 columns'><label>Date To<input class="date_picker" type="text" name="filter_date_to" value="" size="" id="filter_date_to"  /><script>$('#filter_date_to').datepicker({dateFormat: 'dd/mm/yy'});$('#filter_date_to').keyup( function(event) { $(this).val('');}); </script></label></div></li><li><div class='small-12 columns'><label>Actions<br/><button class="button tiny " type="submit" >Filter</button><button id="filter_reset_leaveapplications_filter" class="button tiny " name="filter_reset_leaveapplications_filter" type="submit" value="reset" >Reset</button></label></div></li></ul>
</fieldset>
</form>

<a class="button tiny" href="/staff-leaveapplications/new/1">New Leave Application</a>

<table class='tablesorter'><thead><tr><th>Employee</th><th>Status</th><th>Date</th><th>Days</th><th>Hours</th></tr></thead><tbody><tr><td>Administrator</td><td>New</td><td>21/04/2015</td><td>3</td><td>5</td><td><button class="button tiny " onclick="parent.location='/staff-leaveapplications/edit/1'; return false;" >Edit</button> <button class="button tiny " onclick="if(confirm('Really delete?')) {parent.location='/staff-leaveapplications/delete/1'; return false;}" >Delete</button></td></tr><tr><td>Administrator</td><td>New</td><td>29/04/2015</td><td>2</td><td>3</td><td><button class="button tiny " onclick="parent.location='/staff-leaveapplications/edit/2'; return false;" >Edit</button> <button class="button tiny " onclick="if(confirm('Really delete?')) {parent.location='/staff-leaveapplications/delete/2'; return false;}" >Delete</button></td></tr><tr><td>Administrator</td><td>New</td><td>29/04/2015</td><td>2</td><td>3</td><td><button class="button tiny " onclick="parent.location='/staff-leaveapplications/edit/3'; return false;" >Edit</button> <button class="button tiny " onclick="if(confirm('Really delete?')) {parent.location='/staff-leaveapplications/delete/3'; return false;}" >Delete</button></td></tr><tr><td>Administrator</td><td>New</td><td>29/04/2015</td><td>2</td><td>3</td><td><button class="button tiny " onclick="parent.location='/staff-leaveapplications/edit/4'; return false;" >Edit</button> <button class="button tiny " onclick="if(confirm('Really delete?')) {parent.location='/staff-leaveapplications/delete/4'; return false;}" >Delete</button></td></tr></tbody></table>

                </div>
            </div>
        </div>

        <div class="row-fluid">
            <div id="footer">
                Copyright &#169; 2015&nbsp;&nbsp;&nbsp;<a href="http://2pisoftware.com">2pi Software</a>
            </div>
        </div>

        <div id="cmfive-modal" class="reveal-modal xlarge" data-reveal style="top: 30px !important;"></div>
        
        <script type="text/javascript" src="/system/templates/js/foundation-5.5.0/js/foundation.min.js"></script>
        <script type="text/javascript" src="/system/templates/js/foundation-5.5.0/js/foundation/foundation.clearing.js"></script>
        <script>
            $(document).foundation({
                reveal : {
                    animation_speed: 150,
                    animation: 'fade'
                }
            });
            
            var modal_history = [];
            var modal_history_pop = false;
            
            // Automatically append the close 'x' to reveal modals
            $(document).on('opened', '[data-reveal]', function () {
                $("#cmfive-modal").append("<a class=\"close-reveal-modal\">&#215;</a>");
                modal_history.push()
                bindModalLinks();
            });
            
            function bindModalLinks() {
                // Stop a links and follow them inside the reveal modal
                $("#cmfive-modal a:not(#modal-back)").click(function(event) {                    
                    if ($(this).hasClass("close-reveal-modal")) {
                        $("#cmfive-modal").foundation("reveal", "close");
                    } else {
                        if ($(this).attr('href')[0] === "#") {
                            return true;
                        } else {
                            // Add href to history if the href wasnt the last item in the stack and that we arent the back link
                            if (modal_history.indexOf($(this).attr('href')) !== modal_history.length) {
                                modal_history.push($(this).attr('href'));
                                modal_history_pop = true;
                            }
                            changeModalWindow($(this).attr('href'));
                        }
                    }
                    return false;
                });
                
                // Bind back traversal to modal window
                $("#cmfive-modal #modal-back").click(function(event) {
                    // event.preventDefault();
                    if (modal_history.length > 0) {
                        // When you click a link, THAT link goes onto the stack.
                        // However we want the one before it.
                        // The modal_history_pop prevents us from popping twice (if back is pressed twice in a row
                        // for example)
                        if (modal_history_pop) {
                            modal_history.pop();
                            modal_history_pop = false;
                        }
                        if (modal_history.length > 0) {
                            changeModalWindow(modal_history.pop());
                        }
//                        console.log(modal_history);
                    } 
                    return false;
                });
            }
            
            // Updates the modal window by content from ajax request to uri
            function changeModalWindow(uri) {
                $.get(uri, function(data) {
                    $("#cmfive-modal").html(data + "<a class=\"close-reveal-modal\">&#215;</a>");
                    bindModalLinks();
                });
            }
        </script>
    </body>
</html>